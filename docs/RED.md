# Полное описание проекта: Платформа для выполнения задач в Avito

## Общая концепция

Это Telegram Mini App - веб-приложение на React, которое открывается прямо внутри Telegram через встроенный браузер. Пользователи заходят в бота и получают доступ к платформе для заработка на выполнении простых задач, связанных с отправкой сообщений пользователям Avito.

Основная идея: человек берет задачу, получает ссылку на объявление Avito и готовый текст, который нужно отправить. После выполнения и прохождения модерации получает деньги на баланс.

## Типы задач

Существует два типа задач, каждый со своей ценой (настраивается в конфигурации):

**1. Простое сообщение** 
- Исполнитель переходит по ссылке на объявление Avito
- Отправляет предоставленный текст сообщения владельцу объявления
- Ждет, пока сообщение будет прочитано (появятся две синие галочки в Avito)
- Делает скриншот переписки с видимыми галочками
- Загружает скриншот в систему для проверки

**2. Получение номера телефона**
- Исполнитель переходит по ссылке на объявление Avito
- Отправляет предоставленный текст владельцу объявления
- В процессе общения получает настоящий номер телефона продавца
- Делает скриншот переписки, где виден полученный номер
- Загружает скриншот и вводит полученный номер в систему

## Процесс работы с задачами

### Взятие задач
- Пользователь может одновременно держать до 10 активных задач
- При взятии задачи она блокируется на 24 часа именно для этого пользователя
- Другие пользователи не видят заблокированные задачи в общем списке
- Если за 24 часа задача не отправлена на модерацию, она автоматически возвращается в общий пул

### Выполнение задач
- После взятия задачи пользователь видит:
  - Ссылку на объявление Avito (открывается в отдельном окне/приложении)
  - Текст, который нужно отправить
  - Инструкцию по выполнению
  - Время, оставшееся на выполнение

### Подтверждение выполнения
- Обязательно предоставление скриншота переписки
- На скриншоте должно быть четко видно:
  - Для простых задач: две синие галочки (сообщение прочитано)
  - Для задач с номером: полученный номер телефона в переписке
- Должно быть понятно, что это именно тот пользователь из задачи
- При необходимости можно добавить комментарий к выполненной задаче

## Модерация

- Все выполненные задачи проходят ручную модерацию
- Модератор проверяет в базе данных предоставленные скриншоты
- Примерное время модерации - 2 часа (указывается пользователю)
- При одобрении - деньги зачисляются на баланс исполнителя
- При отклонении - пользователю приходит уведомление с причиной отказа
- Задача после отклонения может быть взята повторно тем же или другим исполнителем

## Система баланса и вывода средств

### Баланс
- У каждого пользователя есть два типа баланса:
  - Основной баланс (за выполненные задачи)
  - Реферальный баланс (процент от заработка приглашенных)
- Баланс отображается на главном экране и в отдельном разделе

### Вывод средств
- Минимальная сумма для вывода: 100 рублей (настраивается в конфиге)
- При выводе пользователь указывает:
  - Номер банковской карты ИЛИ
  - Номер телефона и название банка
- После отправки заявки на вывод появляется сообщение о том, что заявка отправлена на модерацию
- Администратор обрабатывает заявки вручную через базу данных

## Реферальная программа

- Каждый пользователь получает уникальную реферальную ссылку
- При регистрации нового пользователя по этой ссылке создается связь реферер-реферал
- Реферер получает процент от ВСЕХ заработков своего реферала (по умолчанию 50%, настраивается в конфиге)
- Работает только для прямых рефералов (одноуровневая система)
- Реферальные начисления происходят автоматически при одобрении задачи реферала
- В интерфейсе отображается:
  - Количество приглашенных рефералов
  - Общий заработок от реферальной программы
  - Список рефералов с их заработком

## Интерфейс и навигация

### Главное меню бота содержит:
1. **Взять задачу** - выбор между двумя типами задач
2. **Мои активные задачи** - список взятых задач с возможностью перейти к каждой
3. **Баланс** - просмотр баланса, истории начислений, кнопка вывода
4. **Реферальная ссылка** - получение ссылки, статистика по рефералам
5. **Вывод средств** - форма для заявки на вывод с указанием реквизитов
6. **Написать модератору** - перекидывает в отдельный чат поддержки по ID

### При первом входе:
- Пользователь видит приветственное сообщение с кратким описанием сервиса
- Объясняется суть: "Зарабатывай, отправляя несколько сообщений в день в Avito - простая работа, щедрая оплата!"
- Автоматическая регистрация по Telegram ID при нажатии /start

### Детали задачи показывают:
- ID задачи
- Тип задачи
- Время до истечения блокировки
- Ссылку на объявление Avito
- Текст для отправки
- Кнопки для загрузки скриншота и отправки на проверку
- Возможность отказаться от задачи

## Роли в системе

**Обычный пользователь (исполнитель):**
- Берет и выполняет задачи
- Получает вознаграждение
- Может приглашать рефералов
- Выводит заработанные средства

**Администратор/Модератор:**
- Работает напрямую с базой данных
- Добавляет новые задачи в систему (URL Avito, текст сообщения, тип задачи)
- Проверяет выполненные задачи
- Обрабатывает заявки на вывод средств
- При необходимости блокирует недобросовестных пользователей

## Добавление задач

На данном этапе задачи добавляются администратором вручную в базу данных через Python-скрипт. При добавлении указывается:
- URL объявления на Avito
- Текст сообщения для отправки
- Тип задачи (простая или с получением номера)
- Цена автоматически подтягивается из конфигурации в зависимости от типа

В будущем планируется создание скрипта для автоматического наполнения задачами.

## Конфигурация системы

В конфигурационном файле настраиваются:
- Цена за простую задачу
- Цена за задачу с получением номера
- Процент реферальных отчислений
- Минимальная сумма для вывода
- Максимальное количество одновременных задач (10)
- Время блокировки задачи (24 часа)

## Хранение данных

- Все данные хранятся в PostgreSQL
- Скриншоты сохраняются локально на сервере
- История всех действий сохраняется для возможности проверки

## Важные особенности

1. **Прозрачность для пользователя** - всегда понятно, что нужно сделать и какое вознаграждение получишь
2. **Защита от злоупотреблений** - один пользователь не может взять больше 10 задач, есть временное ограничение
3. **Контроль качества** - все задачи проходят модерацию перед оплатой
4. **Мотивация через рефералов** - пользователи заинтересованы приглашать новых исполнителей
5. **Простота использования** - весь функционал доступен прямо в Telegram, не нужно устанавливать дополнительные приложения

## Технические аспекты

- Frontend на React работает как Mini App внутри Telegram WebView
- Backend на FastAPI обрабатывает все запросы и бизнес-логику  
- PostgreSQL хранит всю информацию о пользователях, задачах, балансах
- Авторизация происходит автоматически через Telegram ID
- Все взаимодействие происходит через API между React-приложением и FastAPI-сервером

Проект разработан по принципу KISS (Keep It Simple, Stupid) - максимальная простота и понятность архитектуры.